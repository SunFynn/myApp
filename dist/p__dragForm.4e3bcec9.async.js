(self["webpackChunkant_design_pro"]=self["webpackChunkant_design_pro"]||[]).push([[952],{97197:function(e){e.exports={ContentBox:"ContentBox___1Alqp",FormContent:"FormContent___2At_6",Containers:"Containers___1UPoF",formContainers:"formContainers___EPyYZ",deleteIcon:"deleteIcon___18NFq",formItemStyle:"formItemStyle___2J2gC",formItemLabel:"formItemLabel___7_Y9N",activeFormItem:"activeFormItem___1aMmM",noFormItem:"noFormItem___3QlJ2"}},45581:function(e){e.exports={LeftBox:"LeftBox___2Z4_F",tag:"tag___UnIvy"}},73039:function(e){e.exports={RightBox:"RightBox___1BaoZ",TopBtns:"TopBtns___1MLe-","ant-btn":"ant-btn___1iMp6",saveBtn:"saveBtn___3xD-1",FormConfig:"FormConfig___1N6wh"}},54541:function(e){e.exports={dragForm:"dragForm___2OdbI",left:"left___oB7SS",content:"content___2TJkh",right:"right___3blU1"}},33853:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return oe}});for(var l=a(2824),n=a(67294),r=a(67265),i=(a(71153),a(60331)),o=a(16941),c=(a(96433),a(2864)),s=(a(43358),a(34041)),d=(a(66126),a(99177)),u=(a(77576),a(12028)),m=(a(77883),a(49747)),h=(a(48736),a(27049)),f=(a(88983),a(47933)),p=(a(63185),a(9676)),x=(a(47673),a(4107)),_=(a(14965),a(68588)),v=_.Z.MonthPicker,I=_.Z.RangePicker,j=_.Z.WeekPicker,g=x.Z.TextArea,b=p.Z.Group,Z=f.ZP.Group,k=[],C=0;C<3;C++)k.push({key:C.toString(),label:"\u9009\u9879 ".concat(C),value:C.toString()});var y={Divider:h.Z,DatePicker:_.Z,RangePicker:I,MonthPicker:v,WeekPicker:j,Input:x.Z,TextArea:g,InputNumber:m.Z,Switch:u.Z,Slider:d.Z,CheckboxGroup:b,RadioGroup:Z,Select:s.Z,Rate:c.Z},S=[{name:"Containers",id:"Containers",attr:{style:{border:"1px solid #dde6f0"}},label:"\u5bb9\u5668"},{name:"RangePicker",id:"RangePicker",attr:{style:{width:"100%"},defaultValue:void 0,placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]},label:"\u533a\u95f4\u9009\u62e9\u6846"},{name:"DatePicker",id:"DatePicker",attr:{style:{width:"100%"},defaultValue:void 0,placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f"},label:"\u65e5\u9009\u62e9\u6846"},{name:"MonthPicker",id:"MonthPicker",attr:{style:{width:"100%"},defaultValue:void 0,placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd"},label:"\u6708\u9009\u62e9\u6846"},{name:"WeekPicker",id:"WeekPicker",attr:{style:{width:"100%"},defaultValue:void 0,placeholder:"\u8bf7\u9009\u62e9\u5468\u671f"},label:"\u5468\u9009\u62e9\u6846"},{name:"Input",id:"Input",attr:{defaultValue:"",placeholder:"\u8bf7\u8f93\u5165"},label:"\u6587\u672c\u6846"},{name:"TextArea",id:"TextArea",attr:{defaultValue:"",placeholder:"\u8bf7\u8f93\u5165"},label:"\u6587\u672c\u57df"},{name:"InputNumber",id:"InputNumber",attr:{defaultValue:void 0,placeholder:"\u8bf7\u8f93\u5165"},label:"\u6570\u5b57\u6846"},{name:"Switch",id:"Switch",attr:{style:{width:44},defaultValue:!1},label:"\u5f00\u5173"},{name:"Slider",id:"Slider",attr:{style:{width:"100%",padding:"0"},defaultValue:10},label:"\u6ed1\u52a8\u6761"},{name:"Rate",id:"Rate",attr:{style:{width:"100%",color:"#3591f4"},defaultValue:0},label:"\u8bc4\u5206"},{name:"Divider",id:"Divider",attr:{},label:"\u5206\u5272\u7ebf"},{name:"CheckboxGroup",id:"CheckboxGroup",attr:{options:k,defaultValue:[]},label:"\u591a\u9009\u6846"},{name:"RadioGroup",id:"RadioGroup",attr:{options:k,defaultValue:k[0].value},label:"\u5355\u9009\u6846"},{name:"Select",id:"Select",attr:{options:k,defaultValue:k[0].value,placeholder:"\u8bf7\u9009\u62e9"},label:"\u4e0b\u62c9\u6846"}],D=a(45581),F=a.n(D),N=a(85893),V=function(){return(0,N.jsxs)("div",{className:F().LeftBox,children:[(0,N.jsx)("h3",{children:"\u914d\u7f6e\u7ec4\u4ef6"}),(0,N.jsx)(o.ReactSortable,{sort:!1,group:{name:"fieldLeftContainer",pull:"clone",put:!1},list:S,setList:function(){},children:S.map((function(e){return(0,N.jsx)("div",{"data-id":e.name,style:{marginTop:10},className:F().tag,children:(0,N.jsx)(i.Z,{children:e.label+"-"+e.name})},e.name)}))})]})},P=V,w=a(11849),B=a(73218),R=a(96486),A=a(94184),M=a.n(A),L=a(97197),T=a.n(L),G=function(e){var t=e.ItemData,a=e.setItemData,l=e.activeItem,n=e.setActiveItem,r=function(e,r){return e&&Array.isArray(e)?Array.isArray(e)&&!e.length?null:e.map((function(o,s){var d=""===r?String(s):"".concat(r,"-").concat(s);if(o){if("Containers"===o.name)return(0,N.jsxs)("div",{className:T().formContainers,children:[(0,N.jsx)(B.Z,{className:T().deleteIcon,onClick:function(){e.splice(s,1),a((0,R.cloneDeep)(t))}}),c(o,d)]});var u=null===y||void 0===y?void 0:y[o.name];return(0,N.jsxs)("div",{"data-id":d,className:M()(T().formItemStyle,l.cellId===o.cellId?T().activeFormItem:""),onClick:function(){n(o)},children:[(0,N.jsx)(B.Z,{className:T().deleteIcon,onClick:function(){e.splice(s,1),a((0,R.cloneDeep)(t))}}),"Divider"!==o.name&&(0,N.jsx)("div",{className:T().formItemLabel,children:o.label}),(0,N.jsx)("div",{style:{flex:1},children:i(o,d,u)})]},o.cellId)}return null})):null},i=function(e,t,a){switch(e.name){case"Divider":return(0,N.jsx)(a,(0,w.Z)({},e.attr),t);case"Select":return(0,N.jsx)(a,(0,w.Z)((0,w.Z)({},e.attr),{},{children:(e.attr.options||[]).map((function(e){return(0,N.jsx)(s.Z.Option,{value:e.value+"",children:e.label},e.key)}))}),t);default:return(0,N.jsx)(a,(0,w.Z)({},e.attr),t)}},c=function(e,t){return(0,N.jsx)(o.ReactSortable,(0,w.Z)((0,w.Z)({fallbackOnBody:!0,animation:150,group:{name:"fieldItemContainer",pull:!0,put:!0},sort:!0,scroll:!0,id:e.cellId,className:T().Containers,"data-id":t,list:e.children||[],setList:function(t,a){return d(t,a,e)}},e.attr),{},{children:r(e.children,t)}),e.cellId)},d=function(e,l,n){var r=(0,R.cloneDeep)(e),i=r.map((function(e){return"Containers"!==e.name||e.children||(e.children=[]),e.cellId||(e.cellId="".concat(e.name,"-").concat((new Date).getTime(),"-").concat(Math.floor(1e3*Math.random()))),e}));n.children=(0,R.cloneDeep)(i),a((0,R.cloneDeep)(t))},u=function(e,t,l){console.log(e,t,l,"88888888");var n=(0,R.cloneDeep)(e),r=n.map((function(e){return"Containers"!==e.name||e.children||(e.children=[]),e.cellId||(e.cellId="".concat(e.name,"-").concat((new Date).getTime(),"-").concat(Math.floor(1e3*Math.random()))),e}));a(r)};return(0,N.jsxs)("div",{className:T().ContentBox,children:[(0,N.jsx)("h3",{children:"\u8868\u5355\u9875\u9762"}),(0,N.jsx)(o.ReactSortable,{className:T().FormContent,animation:150,group:{name:"fieldItemContainer",pull:!0,put:!0},sort:!0,scroll:!0,list:t,setList:u,children:r(t,"")})]})},O=G,J=(a(57663),a(80226)),E=(a(34792),a(48086)),W=(a(9715),a(903)),q=function(e){return(0,N.jsxs)(n.Fragment,{children:[(0,N.jsx)(W.Z.Item,{name:"placeholder",label:"placeholder",initialValue:"\u8bf7\u8f93\u5165",children:(0,N.jsx)(x.Z,{})}),(0,N.jsx)(W.Z.Item,{name:"defaultValue",label:"\u9ed8\u8ba4\u503c",children:(0,N.jsx)(x.Z,{})})]})},U=q,Y=function(){return(0,N.jsxs)(n.Fragment,{children:[(0,N.jsx)(W.Z.Item,{name:"placeholder0",label:"placeholder0",initialValue:"\u8bf7\u8f93\u5165",children:(0,N.jsx)(x.Z,{})}),(0,N.jsx)(W.Z.Item,{name:"placeholder1",label:"placeholder1",initialValue:"\u8bf7\u8f93\u5165",children:(0,N.jsx)(x.Z,{})})]})},Q=Y,z=function(){return(0,N.jsx)(n.Fragment,{children:(0,N.jsx)(W.Z.Item,{name:"placeholder",label:"placeholder",initialValue:"\u8bf7\u8f93\u5165",children:(0,N.jsx)(x.Z,{})})})},H=z,K={Input:U,RangePicker:Q,DatePicker:H},X=function(e){var t=e.form,a=e.type,l=(0,n.useMemo)((function(){return{labelCol:{span:24},wrapperCol:{span:24}}}),[]),r=K[a];return console.log(t.getFieldsValue(),"-----"),(0,N.jsxs)(W.Z,(0,w.Z)((0,w.Z)({},l),{},{form:t,name:"InputConfig",children:[(0,N.jsx)(W.Z.Item,{name:"label",label:"\u6807\u9898",rules:[{required:!0,message:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:"123",children:(0,N.jsx)(x.Z,{maxLength:10})}),r&&(0,N.jsx)(r,{})]}))},$=X,ee=a(73039),te=a.n(ee),ae=function(e){var t=e.activeItem,a=e.ItemData,r=e.setItemData,i=W.Z.useForm(),o=(0,l.Z)(i,1),c=o[0],s=c.validateFields,d=c.setFieldsValue,u=c.setFieldValue;(0,n.useEffect)((function(){var e=t.label,a=t.attr,l=void 0===a?{}:a,n=l.placeholder,r=l.defaultValue;Array.isArray(n)&&(u("placeholder0",n[0]),u("placeholder1",n[1])),d({label:e,placeholder:n,defaultValue:r})}),[t,a]);var m=function(){s().then((function(e){Object.entries(e).forEach((function(e){"placeholder"===e[0]?t.attr.placeholder=e[1]:"placeholder0"===e[0]?t.attr.placeholder[0]=e[1]:"placeholder1"===e[0]?t.attr.placeholder[1]=e[1]:"defaultValue"===e[0]?(t.attr.defaultValue=e[1],t.attr.value=e[1]):t[e[0]]=e[1]}));var l=(0,R.cloneDeep)(a);r(l)})).catch((function(e){console.error(e,"error")}))},h=function(){localStorage.setItem("formStorage",JSON.stringify(a)),E.default.success("\u4fdd\u5b58\u6210\u529f")},f=function(){console.log(a,"--"),E.default.success("\u53d1\u5e03\u6210\u529f")};return(0,N.jsxs)("div",{className:te().RightBox,children:[(0,N.jsxs)("div",{className:te().TopBtns,children:[(0,N.jsx)(J.Z,{className:te().saveBtn,onClick:h,children:"\u4fdd\u5b58"}),(0,N.jsx)(J.Z,{type:"primary",onClick:f,children:"\u53d1\u5e03"})]}),(0,N.jsxs)("div",{className:te().FormConfig,children:[(0,N.jsxs)("h4",{children:["\u7ec4\u4ef6\u9879\u914d\u7f6e ",t.name?" - ".concat(t.name):""]}),Object.keys(t).length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)($,{form:c,type:t.name}),(0,N.jsx)(J.Z,{type:"primary",style:{width:"100%"},onClick:m,children:"\u786e\u5b9a"})]}):null]})]})},le=ae,ne=a(54541),re=a.n(ne);function ie(){var e=(0,n.useState)([]),t=(0,l.Z)(e,2),a=t[0],i=t[1],o=(0,n.useState)({}),c=(0,l.Z)(o,2),s=c[0],d=c[1];return(0,n.useEffect)((function(){i(JSON.parse(localStorage.getItem("formStorage")||"[]"))}),[]),(0,N.jsx)(r.ZP,{title:"\u4f4e\u4ee3\u7801\u62d6\u62fd\u8868\u5355",children:(0,N.jsxs)("div",{className:re().dragForm,children:[(0,N.jsx)("div",{className:re().left,children:(0,N.jsx)(P,{})}),(0,N.jsx)("div",{className:re().content,children:(0,N.jsx)(O,{ItemData:a,setItemData:i,activeItem:s,setActiveItem:d})}),(0,N.jsx)("div",{className:re().right,children:(0,N.jsx)(le,{activeItem:s,setActiveItem:d,ItemData:a,setItemData:i})})]})})}var oe=ie}}]);